"use strict";var startTime,localstoreId="ioEventId";function generateId(){var e="io-"+(new Date).getTime()+"-"+Math.random().toString(36).substring(2,9);try{localStorage.setItem(localstoreId,e)}catch(e){}return e}function getClientId(){var e="";try{e=localStorage.getItem(localstoreId)}catch(e){}return e||generateId()}function sendEvent(e,t){/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*:)*?:?0*1$/.test(location.hostname)||location.protocol;var n=getClientId(),r={eventid:generateId(),event:e,url:t.url,domain:t.domain,referrer:t.referrer,width:t.deviceWidth,agent:t.userAgent},a=new XMLHttpRequest;a.open("POST","".concat(t.apiHost,"/event/").concat(n),!0),a.setRequestHeader("Content-Type","text/json"),a.send(JSON.stringify(r)),a.onreadystatechange=function(){4!==a.readyState&&"sessionend"===e&&cleanup()}}function config(){return{url:location.href,domain:document.currentScript.getAttribute("data-domain"),referrer:document.referrer||"",deviceWidth:window.innerWidth,userAgent:window.navigator.userAgent,apiHost:"http://localhost:8080/api"}}function trackEvent(e){sendEvent(e,config())}function trackPageview(){trackEvent("pageview")}function endPageView(){trackEvent("sessionend")}function enableTracking(){window.addEventListener("beforeunload",endPageView)}function cleanup(){window.removeEventListener("beforeunload",endPageView)}trackPageview(),enableTracking();