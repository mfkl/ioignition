"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var startTime,localstoreId="ioEventId";function generateEventId(){var e="io-"+(new Date).getTime()+"-"+Math.random().toString(36).substring(2,9);try{localStorage.setItem(localstoreId,e)}catch(e){}return e}function getEventId(){var e="";try{e=localStorage.getItem(localstoreId)}catch(e){}return e||generateEventId()}function sendEvent(e,t){/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*:)*?:?0*1$/.test(location.hostname)||location.protocol;var n=getEventId(),r=Date.now()-startTime,o={n:e,u:t.url,d:t.domain,r:t.referrer,w:t.deviceWidth,a:t.userAgent,t:r},i=new XMLHttpRequest;i.open("POST","".concat(t.apiHost,"/api/event/").concat(n),!0),i.setRequestHeader("Content-Type","text/plain"),i.send(JSON.stringify(o)),i.onreadystatechange=function(){4!==i.readyState&&cleanup()}}function config(){return{url:location.href,domain:location.hostname,referrer:document.referrer||null,deviceWidth:window.innerWidth,userAgent:window.navigator.userAgent,apiHost:"https://ioignition.com/api"}}function trackEvent(e,t){sendEvent(e,_objectSpread(_objectSpread({},config()),t))}function trackPageview(e){trackEvent("pageview",e)}function startTimeListener(){startTime=Date.now()}function enableTracking(){window.addEventListener("DOMContentLoaded",startTimeListener),window.addEventListener("beforeunload",trackPageview)}function cleanup(){window.removeEventListener("DOMContentLoaded",startTimeListener),window.removeEventListener("beforeunload",trackPageview)}enableTracking();